# 七、容器

到目前为止，我们主要是在一个变量中存储一个值，如下所示:

```py
playerName = 'Sloan'

```

Python 允许在同一个变量中存储多个值。在这种情况下，您将为容器对象指定一个名称。有三种不同类型的容器:

*   元组

*   目录

*   词典

在有些情况下，您会使用其中一种而不是另一种，我们将讨论每种用法的利弊。

## 容器术语

容器子部分称为元素。每个元素都可以使用“[”和“]”字符进行索引，并指定一个介于 0 和 n-1 之间的数字，其中“n”是它们之间的容器中的项目数。我们将在元组部分看到这是如何工作的。

## 元组

元组是不可变的对象集合。集合中的元素和容器本身都不能修改。这意味着不能在元组中添加和删除元素。

对于视频游戏，你可能想把玩家的位置——他们的 x 和 y 坐标——存储在一个元组中。

元组是对象的列表，可以是文字或变量名，用逗号分隔，并用括号字符“(”和“)”括起来。例如:

```py
('sloan', 'robert')

```

若要访问元组中的元素，请使用“[”和“]”字符，并将索引值放在它们之间。假设您需要数组中的第一个元素，那么您应该像这样指定“0”:

```py
('sloan', 'robert')[0]

```

这将显示

```py
'sloan'

```

### 从元组中移除元素

如果你想从一个元组中删除项目(你不能),但有一个办法。创建新的元组！假设您有一个包含五个元素的元组，但是您不想要第三个元素:

```py
numbers = (1, 2, 3, 4, 5)
tuple(x for x in numbers if x != 3)

```

哇哦！这看起来不必要的复杂！这是因为元组是不可变的，这意味着它们不能改变。让我们稍微分解一下复杂性。tuple()函数从给定的序列中返回一个元组。例如:

```py
>>> tuple('abcdef')
('a', 'b', 'c', 'd', 'e', 'f')
>>> tuple(['sloan', 'robert'])
('sloan', 'robert')

```

在前一个例子中，字符串被分割成单独的字符。后者包含一个名称列表，并根据该列表创建一个元组。

完成所有魔法的部分叫做*列表理解*。它用于基于现有列表创建列表。

```py
x for x in range(0, 5) if x != 3

```

列表理解接受一个列表，处理列表中的每个元素，并生成另一个列表。正如我们已经看到的，tuple()关键字从任何序列中生成一个元组。字符串是字符序列，元组是(不可变的)对象序列，列表也是对象序列。

不要太拘泥于那种陈述的格式；这仅仅是如何从元组中移除项目的一个例子。

### 更改元素值

元组的另一个‘不能做’。但是，也有一种方法可以解决这个问题。元组是不可变的，这意味着它们不能被改变，它们的元素也是如此。唯一的选择是创建另一个元组。

在这个例子中，我们有一个表示玩家的 x 和 y 坐标的元组(“playPos”)和另一个表示玩家的速度(“speed”)的元组。为了得到玩家的下一个位置，我们把速度加到当前位置。记住，我们不能改变元组或它的元素。我们必须创建一个新元组，并将该值赋给“playPos”:

```py
playPos = (5, 4)
print("playPos = %d, %d" % playPos)
speed = (2, 1)
playPos = (playPos[0] + speed[0], playPos[1] + speed[1])
print("playPos = %d, %d" % playPos)

```

该行:

```py
playPos = (playPos[0] + speed[0], playPos[1] + speed[1])

```

在等号的右边，创建了新的元组。这就被命名为“playPos”分配给“playPos”的元组被这个新值覆盖。这相当于以下简单的赋值:

```py
>>> num = 5
>>> print(num)
5
>>> num = 10
>>> print(num)
10

```

在本例中，值“num”最初被赋值为 5。然后给它赋值 10。这将覆盖最初存储在“num”中的值

### 印刷中的元组

我们以前在显示格式化字符串时使用过元组。例如:

```py
>>> numbers = (1, 2, 3, 4, 5)
>>> print("%d %d %d %d %d" % numbers)
1 2 3 4 5

```

### 解构元组

另一个常见的动作是将元组解构为其组成部分，并将它们分配给单独的变量。这是通过把要赋值的变量放在等号的左边，把元组放在另一边来实现的。在下面的例子中，我们有一个包含两个元素的向量“vec ”:一个用于 x 坐标，另一个用于 y 坐标:

```py
>>> vec = (2, 3)
>>> x, y = vec
>>> x
2
>>> y
3
>>>

```

类似地，也可以通过指定逗号分隔的值来构造元组。这个我不推荐；我更喜欢使用带括号的显式语法，但这也同样有效:

```py
>>> vec2 = x, y
>>> vec2
(2, 3)
>>>

```

## 列表

列表是可变的容器。这意味着元素和列表本身都可以改变。对于列表来说，这意味着我们可以在创建列表后添加和删除元素。使用 append()方法将项目添加到列表中，通过 remove()方法移除项目。方法是对象可以执行的操作。我们将在本文的面向对象部分看到更多的方法。

列表在电子游戏中被大量使用。你的物品清单是一个物品列表，屏幕上的精灵(图像)存储在一个列表中，组成游戏的关卡集合也可以存储在一个列表中。

### 列表创建

您可以创建一个空白列表，也可以创建一个最初填充了值的列表:

```py
blankList = []
populatedList = [1, 2, 3, 4, 5]

```

如果我们在 Python 解释器中运行这些命令，其输出将是

```py
>>> blankList = []
>>> populatedList = [1, 2, 3, 4, 5]
>>> blankList
[]
>>> populatedList
[1, 2, 3, 4, 5]
>>>

```

### 向列表中添加值

如果我们想向“空白列表”添加值，我们只需使用 append()方法，并将我们想要添加的内容放在括号内:

```py
>>> blankList.append("Python")
>>> blankList
['Python']
>>>

```

添加另一个计算机语言名称(这次是 Lua)将意味着我们的空白列表将包含

```py
>>> blankList.append("Lua")
>>> blankList
['Python', 'Lua']
>>>

```

### 从列表中删除值

要从列表中删除一个项目，remove()方法的用法如下:

```py
>>> populatedList = [1, 2, 3, 4, 5]
>>> populatedList.remove(3)
>>> populatedList
[1, 2, 4, 5]
>>>

```

您还可以通过索引值从列表中移除项目。在列表中没有内置的方法来做到这一点；相反，我们使用“del”关键字。例如，要删除第一个元素，即索引 0(零)，我们可以使用

```py
>>> populatedList = [1, 2, 4, 5]
>>> del populatedList[0]
>>> populatedList
[2, 4, 5]
>>>

```

这意味着我们也可以删除多个项目；假设我们想从列表中删除所有项目。我们会这样做:

```py
>>> populatedList = [2, 4, 5]
>>> del populatedList[:]
>>> populatedList
[]
>>>

```

并再次填充列表:

```py
populatedList = [1, 2, 3, 4, 5]

```

假设我们想从列表中删除 2 和 3。我们可以发出这一行两次:

```py
del populatedList[1]

```

为什么两次？列表的索引 1 是“2”元素。当我们删除列表中的某个内容时，之后的所有内容都会上移一个位置。因此，该数组现在包含

```py
[1, 3, 4, 5]

```

这意味着索引 1 现在包含“3”

当我们可以一次完成所有任务时，两次键入相同的命令有点浪费。我们可以使用冒号(':')来指定要删除的值的范围。现在，要同时删除 2 和 3，我们可以使用

```py
del populatedList[1:3]

```

冒号前的数字是删除的起始索引。列后的数字是 1 加上要删除的元素数。如果您想删除从第一个元素开始的所有内容，您可以使用

```py
del populatedList[1:]

```

### 医生候诊室计划

我创建了一个简单的程序，以医生候诊室为例演示列表。用户可以添加患者，在呼叫时将他们从列表中删除，以及退出程序。所有的动作都是通过一个菜单完成的。

```py
#!/usr/bin/python3
names = [] # an empty list of names

```

我们每天早上从一张空白清单开始。

```py
cmd = ""
while cmd != '4':

```

有四个命令:1–列出姓名，2–添加姓名，3–呼叫下一位患者，4–退出。用户的命令将存储在“cmd”变量中。请注意，我们有一个“while”循环来保持用户在程序中，直到他们选择退出。

```py
    print("1\. List names")
    print("2\. Add name")
    print("3\. Call next patient")
    print("\n4\. Quit")

```

显示菜单是为了让用户知道他们可以选择的选项。

```py
    cmd = input("\rCommand : ")

```

现在会提示用户输入命令。我们现在将使用一系列嵌套的 if 来执行用户选择的命令。

```py
    if cmd == '1':
        for name in names:
            print (name)
        print ("\n")

```

如果用户输入‘1’，那么我们使用‘for’循环遍历‘names’列表中的所有名字。在每次迭代中，我们打印病人的名字。最后，我们用一个换行符(' \n ')结束它，在屏幕上给我们一些空白。

```py
    elif cmd == '2':
        newName = input("Name : ")
        names.append(newName)

```

如果用户输入“2 ”,我们会提示他们输入新到达的患者的姓名。然后，我们使用 append()方法将新名称添加到名称列表中。

```py
    elif cmd == '3':
        if len(names) == 0:
            print ("There are no more patients!")
        else:
            nextPatient = names[0]
            names.remove(nextPatient)
            print ("Calling %s" % nextPatient)

```

对于第三个也是最后一个命令，但不是我们程序的结尾，用户选择呼叫下一个要看的病人。这种做法提供了严格的先到先得的政策。这意味着列表中的第一项被删除。但是，如果列表中没有项目，则会显示一条警告消息。您可以使用“len”关键字来确定项目列表的长度。

```py
    elif cmd != '4':
        print ("Invalid command!")

```

程序的最后几行用来让用户知道他们输入了无效的命令:不是 1、2、3 或 4。

将程序保存为“patients.py”(不带引号)，并且不要忘记更改程序的属性以允许它被执行。记住！您只需更改一次:

```py
$ chmod +x patients.py

```

要运行该程序:

```py
$ ./patients.py

```

当你和程序在同一个目录的时候。

## 字典

字典是一组键/值对。这意味着您可以使用用户定义的密钥来访问信息，而不是索引号。

电子游戏中可以使用字典来查找相关数据。例如，如果你想查看一把特定的剑造成的伤害，你可以使用字典来存储游戏中每种武器的数据。您可以对列表做同样的事情，但是遍历列表需要时间，一次一个元素来查找数据。当你想快速找到某样东西时，使用字典。

例如，我们将定义一个包含不同人的电话号码的字典。一个人的电话号码可以通过姓名获得:

```py
>>> numbers = {'Sloan':'416-555-1234', 'Kevin':'212-555-4321'}
>>> numbers['Sloan']
'416-555-1234'
>>>

```

第一行定义了包含两个条目的字典“numbers”。每个条目都是一个单独的键/值对。每个键/值用冒号“:”分隔，每对用逗号“，”分隔。

### 遍历字典

我们可以使用字典的 iteritems()方法遍历每个条目:

```py
>>> for k,v in numbers.iteritems():
...  print ("%s = %s" % (k ,v ))
...
Sloan = 416-555-1234
Kevin = 212-555-4321
>>>

```

### 向词典中添加新项目

字典有一个更简单的添加新条目的方法:如果一个键不存在，该值被添加到字典中。如果一个键已经存在，那么新值被分配给该键。

```py
>>> numbers['Frank'] = '216-555-1234'
>>> numbers
{'Sloan': '416-555-1234', 'Frank': '216-555-1234', 'Kevin': '2
>>>

```

### 从字典中删除条目

为了从字典中删除一个词条，我们使用我们的老朋友“del”从“数字”字典中去掉“斯隆”

```py
>>> del numbers['Sloan']
>>> numbers
{'Frank': '216-555-1234', 'Kevin': '212-555-4321'}
>>>

```

## 结论

我们已经看到 Python 为我们提供了三种不同类型的容器，为我们的程序提供了选项。元组可以用来像不可变(不能被改变)的项目一样分组在一起。用一个元组定义一个结构线空间中的一个点。空间中一个点的属性是它的 x 和 y 坐标。这两个元素不会改变，你很少迭代(循环)它们。列表容器可用于存储可添加和移除的项目集合。最后，字典允许添加、删除和修改条目。

我们现在要从 Python 语言中休息一下，看看如何着手设计一个游戏，并跳跃到 Raspberry Pi 使用的名为 LXDE 的窗口系统。这是因为我们将在接下来的几章中开始研究 PyGame。